<?xml version="1.0" encoding="UTF-8"?>
<export table-id="tblStudent" header-row="true">

  <!-- Only export active or prereg students -->
  <filter field="stdEnrStatus" operator="equals" value="Active" />   
  <filter field="stdEnrStatus" operator="equals" value="PreReg" connector="or" />
  <filter field="stdEnrStatus" operator="equals" value="Active No Primary" connector="or" />

  <!-- Sort schools together for easier processing -->
  <sort field="relStfSklOid.sklSchoolName" direction="asc" />
  <sort field="relStfPsnOid.psnNameLast" direction="asc" />
  <sort field="relStfPsnOid.psnNameFirst" direction="asc" />
  
  <field id="stdIDLocal" header-source="constant" header-value="PupilId" /> 
  <field id="stdIDState" header-source="constant" header-value="SaskLearningId" />
  <field id="relStdSklOid.sklSchoolID" header-source="constant" header-value="SchoolDAN" />
  <field id="relStdSklOid.sklSchoolName" header-source="constant" header-value="SchoolName" />
  <field id="stdPgmOfStudy" header-source="constant" header-value="ProgramOfStudy" />
  <field id="stdHomeLang" header-source="constant" header-value="LanguageAtHome" />
  <field id="relStdPsnOid.psnFieldA007" header-source="constant" header-value="CountryOfOrigin" />

  <field id="stdHomeroom" header-source="constant" header-value="Homeroom" />
  <field id="stdHRTeacher" header-source="constant" header-value="HomeroomTeacher" />

  <!-- Preferred Names -->
  <field id="relStdPsnOid.psnFieldC003" header-source="constant" header-value="PreferredLastName" />
  <field id="relStdPsnOid.psnFieldC002" header-source="constant" header-value="PreferredMiddleName" />
  <field id="relStdPsnOid.psnFieldC001" header-source="constant" header-value="PreferredFirstName" />

  <!-- Legal Names -->
  <field id="relStdPsnOid.psnNameLast" header-source="constant" header-value="LegalLastName" />
  <field id="relStdPsnOid.psnNameMiddle" header-source="constant" header-value="LegalMiddleName" />
  <field id="relStdPsnOid.psnNameFirst" header-source="constant" header-value="LegalFirstName" />

  <field id="relStdPsnOid.psnDob" format="MM/dd/YYYY" header-source="constant" header-value="DOB_MMddYYYY" />
  <field id="stdGradeLevel" header-source="constant" header-value="Grade" find="^0" replaceAll="" />
  <field id="relStdPsnOid.psnGenderCode" header-source="constant" header-value="Gender" />
  
  <field id="relStdPsnOid.psnEmail01" header-source="constant" header-value="PreferredEmail" />
  <field id="relStdPsnOid.psnFieldC007" header-source="constant" header-value="IntegrationEmail" />
  
  <field id="relStdPsnOid.relPsnAdrPhys.adrAddress01" header-source="constant" header-value="studentStreetAddress" />    
  <field id="relStdPsnOid.relPsnAdrPhys.adrAddress02" header-source="constant" header-value="studentPOBox" /> 
  <field id="relStdPsnOid.relPsnAdrPhys.adrCity" header-source="constant" header-value="studentCity" />
  <field id="relStdPsnOid.relPsnAdrPhys.adrPostalCode" header-source="constant" header-value="studentPostalCode" />    
  <field id="relStdPsnOid.relPsnAdrMail.adrAddress01" header-source="constant" header-value="studentMailingAddress" />

  <!-- Contact 1 -->
  <field id="relStdCtjOid1.ctjEmergncyPri" header-source="constant" header-value="Contact1Priority" />
  <field id="relStdCtjOid1.ctjRelateCode" header-source="constant" header-value="EmergencyContact1Relation" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnNameFirst" header-source="constant" header-value="EmergencyContact1FirstName" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnNameLast" header-source="constant" header-value="EmergencyContact1LastName" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnPhone01" header-source="constant" header-value="EmergencyContact1Phone1" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnPhone02" header-source="constant" header-value="EmergencyContact1Phone2" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnPhone03" header-source="constant" header-value="EmergencyContact1Phone3" />
  <field id="relStdCtjOid1.relCtjCntOid.relCntPsnOid.psnEmail01" header-source="constant" header-value="EmergencyContact1Email" />
  <field id="relStdCtjOid1.ctjRecEmail" header-source="constant" header-value="EmergencyContact1ReceivesEmail" />
  <field id="relStdCtjOid1.ctjLivesWith" header-source="constant" header-value="EmergencyContact1LivesWithStudent" />

  <!-- Contact 2 -->
  <field id="relStdCtjOid2.ctjEmergncyPri" header-source="constant" header-value="Contact2Priority" />
  <field id="relStdCtjOid2.ctjRelateCode" header-source="constant" header-value="EmergencyContact2Relation" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnNameFirst" header-source="constant" header-value="EmergencyContact2FirstName" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnNameLast" header-source="constant" header-value="EmergencyContact2LastName" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnPhone01" header-source="constant" header-value="EmergencyContact2Phone1" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnPhone02" header-source="constant" header-value="EmergencyContact2Phone2" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnPhone03" header-source="constant" header-value="EmergencyContact2Phone3" />
  <field id="relStdCtjOid2.relCtjCntOid.relCntPsnOid.psnEmail01" header-source="constant" header-value="EmergencyContact2Email" />
  <field id="relStdCtjOid2.ctjRecEmail" header-source="constant" header-value="EmergencyContact2ReceivesEmail" />
  <field id="relStdCtjOid2.ctjLivesWith" header-source="constant" header-value="EmergencyContact2LivesWithStudent" />
</export>